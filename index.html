<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>간지력 라이브러리 예시</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
    }
    table {
      width: 50%;
      margin: 20px auto;
      border-collapse: collapse;
    }
    th, td {
      border: 1px solid black;
      padding: 10px;
      text-align: center;
    }
    th {
      background-color: #f2f2f2;
    }
  </style>

  <!-- GanZhiJS 라이브러리 (CDN) -->
  <script src="https://cdn.jsdelivr.net/gh/jxlwqq/GanZhiJS/dist/ganzhi.min.js"></script>
  <script>
    function calculateDayStemBranch() {
      const birthDateInput = document.getElementById("birthDate").value;
      if (!/^\d{8}$/.test(birthDateInput)) {
        alert("생년월일(양력)을 YYYYMMDD 형식으로 입력하세요.");
        return;
      }

      // 입력값 파싱
      const birthYear = parseInt(birthDateInput.substring(0, 4));
      const birthMonth = parseInt(birthDateInput.substring(4, 6));
      const birthDay = parseInt(birthDateInput.substring(6, 8));

      // GanZhiJS 사용: solar2lunar(년, 월, 일)
      // - ganZhiDay 속성에 '임술' 같은 간지 정보가 들어있음
      const result = GanZhiJS.solar2lunar(birthYear, birthMonth, birthDay);
      // 예: result.ganZhiDay → "壬戌" (중국어 간지 표기)
      //    "임술" 형태로 직접 표기하고 싶으면 수동 변환이 필요할 수 있음

      // result.ganZhiDay 예: "壬戌"
      // 한국어 표기 "임술"로 바꾸려면?
      // - '壬' → '임', '戌' → '술' 매핑 테이블이 필요
      const dayGanZhi = result.ganZhiDay; // 예: "壬戌"

      // 한자 → 한글 치환용 매핑 (간단 예시)
      const dayGanMap = {
        "甲": "갑", "乙": "을", "丙": "병", "丁": "정", "戊": "무",
        "己": "기", "庚": "경", "辛": "신", "壬": "임", "癸": "계"
      };
      const dayZhiMap = {
        "子": "자", "丑": "축", "寅": "인", "卯": "묘", "辰": "진",
        "巳": "사", "午": "오", "未": "미", "申": "신", "酉": "유",
        "戌": "술", "亥": "해"
      };

      // 예: "壬戌" → '壬' + '戌'
      const stem = dayGanMap[ dayGanZhi[0] ] || dayGanZhi[0];
      const branch = dayGanMap[ dayGanZhi[1] ] || dayZhiMap[ dayGanZhi[1] ] || dayGanZhi[1];

      // 표에 표시
      document.getElementById("dayStemBranchCell").innerText = stem + branch; // 예: "임술"
    }
  </script>
</head>
<body>
  <h2>간지력 라이브러리 (GanZhiJS) 예시</h2>
  <label for="birthDate">생년월일(양력) 입력 (YYYYMMDD 형식):</label>
  <input type="text" id="birthDate" maxlength="8" placeholder="예: 19820906" />
  <button onclick="calculateDayStemBranch()">결과 확인</button>

  <h3>결과:</h3>
  <table>
    <tr>
      <th>일주 (일간 + 일지)</th>
    </tr>
    <tr>
      <td id="dayStemBranchCell"></td>
    </tr>
  </table>
</body>
</html>
